<template>
  <div class="flex flex_w">
    <div class="svg-btn" ref="defaultBtn">
      <svg height="60" width="320">
        <text x="80" y="40" class="text" font-size="30" fill="#fff">Hello SVG</text>
        <rect class="rect" height="60" width="320" stroke="#fff" />
      </svg>
    </div>

    <div>
      <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
        <rect ref="rect" x="20" y="20" width="20" height="20" fill="orange"></rect>
      </svg>
    </div>


    <div>
      <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
        <circle ref="circle" cx="10" cy="20" r="10" fill="orange" />
      </svg>
    </div>

    <div>
      <svg width="" height="200" xmlns="http://www.w3.org/2000/svg">
        <path ref="pathLine" d="M 0 0 l 200 100" stroke="red" stroke-width="3" fill="none"/>  
        <!-- 猫 -->
        <path ref="cat" d="M581.18 384c-40.36 0-213.64 3.96-325.18 171.9V384c0-105.88-86.12-192-192-192-35.34 0-64 28.66-64 64s28.66 64 64 64c35.28 0 64 28.72 64 64v512c0 70.6 57.4 128 128 128h352c17.68 0 32-14.32 32-32v-32c0-35.34-28.66-64-64-64h-64l256-192v288c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32V579.72c-20.58 5.34-41.78 9.08-64 9.08-123.62 0-227.04-88.1-250.82-204.8zM896 192h-128l-128-128v268.8c0 106.04 85.96 192 192 192s192-85.96 192-192V64l-128 128z m-144 160c-17.68 0-32-14.32-32-32s14.32-32 32-32 32 14.32 32 32-14.32 32-32 32z m160 0c-17.68 0-32-14.32-32-32s14.32-32 32-32 32 14.32 32 32-14.32 32-32 32z"></path>
        <!-- 狗子 -->
        <path ref="dog" d="M992 192h-128l-14.32-28.62A64 64 0 0 0 792.44 128H685.2l-54.56-54.56C610.46 53.28 576 67.56 576 96.06v299.68l256 91.42V416h64c70.7 0 128-57.3 128-128v-64c0-17.68-14.32-32-32-32z m-224 96c-17.68 0-32-14.32-32-32s14.32-32 32-32 32 14.32 32 32-14.32 32-32 32zM192 448c-35.28 0-64-28.72-64-64 0-35.34-28.66-64-64-64S0 348.66 0 384c0 83.32 53.66 153.7 128 180.2V992c0 17.68 14.32 32 32 32h128c17.68 0 32-14.32 32-32V768h320v224c0 17.68 14.32 32 32 32h128c17.68 0 32-14.32 32-32V555.1L532.1 448H192z"></path>
      </svg>
    </div>
  </div>

  <div class="test">
    <div class="name">测试</div>
    <svg width="200" height="200" xmlns="http://www.w3.org/2000/svg">
      <!-- 今天 -->
      <g fill="none" stroke="#000000" stroke-width="1">
        <path ref="jin" d="M88.43,81.14a6,6,0,0,1-.35,1.7,1.77,1.77,0,0,1-1.25.9,11.38,11.38,0,0,1-3,.3c-1.36,0-3.28,0-5.75-.1-1.4-.07-2.55-.15-3.45-.25a11.92,11.92,0,0,1-2.4-.5,7.45,7.45,0,0,1-2.05-1.1,20.74,20.74,0,0,1-2.2-2q-2.59-2.61-4.65-4.9c-1.36-1.54-2.7-3.15-4-4.85s-2.65-3.59-4.05-5.65-3-4.54-4.8-7.4A13.29,13.29,0,0,0,47,53.94a28.48,28.48,0,0,0-4.75-2.75,20.75,20.75,0,0,0-4.9-1.6,9,9,0,0,0-3.9-.05q-1.29,2-2.4,3.65c-.73,1.1-1.67,2.51-2.8,4.25a8.52,8.52,0,0,0,1.55.55l1.9.45q1,.2,1.8.3a3.48,3.48,0,0,0,1.15,0q1.5-.3,2.4-.45a6.53,6.53,0,0,1,1.6-.1,8.28,8.28,0,0,1,1.35.2c.44.1,1,.25,1.65.45a14,14,0,0,1,5.25,2.9,7.13,7.13,0,0,1,1.95,4.9,2.05,2.05,0,0,1-1,1.9,4.33,4.33,0,0,1-3.2.5,16.88,16.88,0,0,0-7.05.9q-4.35,1.29-10.65,3.8-3.7,1.4-4.45,1.2c-.5-.14.09-.84,1.75-2.1,1.07-.8,2-1.52,2.8-2.15s1.5-1.24,2.1-1.8l1.65-1.55c.5-.47,1-1,1.55-1.5a23.19,23.19,0,0,0-2-3.9,15.42,15.42,0,0,0-2.9-3.4q-2,3.6-3.55,6.25c-1,1.76-2,3.35-3,4.75a34.92,34.92,0,0,1-3,3.8,43.57,43.57,0,0,1-3.55,3.45C13,78,11.46,79.2,9.73,80.54S6,83.4,3.63,85.14a3.86,3.86,0,0,1-2.75,1.1c-.7-.14-1-.77-.85-1.9a9.39,9.39,0,0,1,1.35-4.25c.7-1,1.39-1.39,2.05-1,.14.06.77-.44,1.9-1.5s2.45-2.45,3.95-4.15,3-3.57,4.6-5.6a51.54,51.54,0,0,0,3.95-5.85q1.8-3.11,3.75-6.3t4.25-6.75q2.3-3.55,5.05-7.4c1.83-2.57,3.89-5.35,6.15-8.35a2.93,2.93,0,0,0,.5-1.5c0-.47-.4-1.1-1.2-1.9-.47-.47-.47-.84,0-1.1s1.53-.24,3.2.1a9,9,0,0,1,4.55,2.2,4.88,4.88,0,0,1,1.65,3.6,4.3,4.3,0,0,1-.45,2.1,6.45,6.45,0,0,1-1.85,1.8,22.38,22.38,0,0,0-5,4.7,25.26,25.26,0,0,1,8,2.9,35.58,35.58,0,0,1,8.75,7.1q5.81,6,10.2,9.9a61.11,61.11,0,0,0,8.3,6.3q5.5,3.3,8.55,5.15a40.07,40.07,0,0,1,4.45,3,5,5,0,0,1,1.65,1.9A4.09,4.09,0,0,1,88.43,81.14Zm-71.5,3.2c.34-1.87.78-2.92,1.35-3.15s.92,0,1,.85a1.34,1.34,0,0,0,.7.85,3.61,3.61,0,0,0,2.1.15A43.12,43.12,0,0,0,27.58,82c2-.5,3.8-1,5.5-1.6s3.13-1.09,4.3-1.55a10.39,10.39,0,0,0,1.95-.9c1.2-1.2,2.13-2.09,2.8-2.65a3.71,3.71,0,0,1,2.5-.85,9.2,9.2,0,0,1,3.1.65,14.58,14.58,0,0,1,3.5,1.85,7.76,7.76,0,0,1,3,3.35,2.36,2.36,0,0,1-.3,2.75,4.83,4.83,0,0,0-1.1,1.65q-.6,1.25-1.2,2.7c-.4,1-.77,1.88-1.1,2.75s-.57,1.46-.7,1.8c-.4,1.4-.91,3-1.55,4.65s-1.32,3.36-2.05,5a45,45,0,0,1-2.35,4.55,10.84,10.84,0,0,1-2.55,3.1c-1.06.8-1.93,1-2.6.65S37.5,108.24,37,106a15.86,15.86,0,0,1-.55-3.4,3.34,3.34,0,0,1,1.15-1.9,10.93,10.93,0,0,0,2.2-3.25,33.08,33.08,0,0,0,1.9-4.8A43.06,43.06,0,0,0,43,87.79a14.14,14.14,0,0,0,.35-3.55,39.18,39.18,0,0,1-6,2.75q-3.39,1.24-6.5,2.15t-5.45,1.35a11.85,11.85,0,0,1-2.85.35,12,12,0,0,1-3.4-1,4.81,4.81,0,0,1-1.75-1.5,3.86,3.86,0,0,1-.6-1.85A9.54,9.54,0,0,1,16.93,84.34Z"/>
        <path ref="tian" d="M186.63,106.44c.47.73.64,1.28.5,1.65s-.67.71-1.6,1a20.29,20.29,0,0,1-5.15,1,57.12,57.12,0,0,1-7.85-.2,17.79,17.79,0,0,1-4.85-1.15,22.08,22.08,0,0,1-5.15-3,45.53,45.53,0,0,1-5.7-5.3,88.32,88.32,0,0,1-6.4-7.95,48,48,0,0,0-3.6-4.4,17.28,17.28,0,0,0-3.4-2.85,19.05,19.05,0,0,0-3.9-1.9,50.51,50.51,0,0,0-4.9-1.45,53,53,0,0,0-.95,5.6q-.35,3-.45,5.8a10.79,10.79,0,0,1-1.8,5.7,13.74,13.74,0,0,1-5.4,4.5,26.14,26.14,0,0,1-10,3.15,16.93,16.93,0,0,1-7.25-1c-1-.4-1.47-.89-1.4-1.45s.7-.89,1.9-1a16.73,16.73,0,0,0,6.55-2.15,24.23,24.23,0,0,0,6.85-5.65,22,22,0,0,0,3-5.25,41.94,41.94,0,0,0,2.1-7.55,14.56,14.56,0,0,1-4.5,1.1,20.24,20.24,0,0,1-4.5-.1,11.75,11.75,0,0,1-3.6-1,3.13,3.13,0,0,1-1.8-1.85q-.9-3.51.2-5.5c.54-.94,1.08-1.37,1.65-1.3s.75.43.55,1.1a.37.37,0,0,0,.3.5,5.11,5.11,0,0,0,2-.45c1-.37,2.52-1,4.45-1.9s4.57-2.22,7.9-4a19.37,19.37,0,0,0,.65-3,20.06,20.06,0,0,0,.25-3c-1.87,1.46-3.15,2-3.85,1.6s-.71-1.07,0-2c.53-.74,1.2-1.6,2-2.6s1.64-2,2.5-3c-.33-1.34-.36-2.12-.1-2.35s.9-.09,1.9.45q.41-.51.75-.9c.23-.27.48-.54.75-.8a6.61,6.61,0,0,1-2.2-.8,17.69,17.69,0,0,1-2.6-1.75,24.91,24.91,0,0,1-2.5-2.35,14.9,14.9,0,0,1-1.9-2.5c-1.26-2.4-.8-3.5,1.4-3.3a11.9,11.9,0,0,0,4-.4,24.92,24.92,0,0,0,5.35-2q5.8-2.8,6-4.2c0-.27.25-.49.75-.65a5.54,5.54,0,0,1,2-.2,13.77,13.77,0,0,1,2.85.45,19.63,19.63,0,0,1,3.4,1.2A9.06,9.06,0,0,1,155,39.49a5.14,5.14,0,0,1,1.25,2.5,3.13,3.13,0,0,1-.45,2.25,3.47,3.47,0,0,1-2.05,1.4,20.76,20.76,0,0,0-2.6,1.65q-2.1,1.44-4.8,3.5t-5.4,4.2c-1.8,1.43-3.26,2.65-4.4,3.65a16.1,16.1,0,0,1,1.9,3,10.42,10.42,0,0,1,1,3c.87-.4,2-.94,3.5-1.6s3-1.39,4.55-2.15,3.05-1.52,4.45-2.25,2.5-1.34,3.3-1.8a5.62,5.62,0,0,1,4.25-.2,12.86,12.86,0,0,1,5.25,3c1,.86,1.38,1.71,1.15,2.55s-1.25,1.51-3,2.05a54.57,54.57,0,0,0-5.4,2q-3.3,1.35-6.75,3t-6.6,3.3a56.69,56.69,0,0,0-5,2.85,33.81,33.81,0,0,1,4.25,2.45q2.35,1.55,4.5,3.2c1.44,1.1,2.75,2.16,4,3.2a28.28,28.28,0,0,1,2.6,2.45,19.4,19.4,0,0,0,2.45,2.4q1.56,1.29,3.3,2.55c1.17.83,2.34,1.58,3.5,2.25a18.14,18.14,0,0,0,2.95,1.4q5.51,1.89,9,3.35a50.61,50.61,0,0,1,5.7,2.7,14.45,14.45,0,0,1,3.35,2.45A12.81,12.81,0,0,1,186.63,106.44Z"/>
        <path ref="min" d="M1.84001 0.880117H13.32V24.7601H1.84001V21.9601H10.52V3.64012H1.84001V0.880117ZM1.88001 11.2401H11.72V13.9601H1.88001V11.2401ZM18.76 0.120117H32.24V2.92012H18.76V0.120117ZM18.76 9.84012H32.24V12.6001H18.76V9.84012ZM18.52 19.6801H32.16V22.4001H18.52V19.6801ZM0.200012 0.880117H3.00001V28.4801H0.200012V0.880117ZM31.12 0.120117H34.12V31.2801C34.12 33.1601 33.64 34.0801 32.36 34.6001C31.08 35.0801 28.88 35.1201 25.44 35.1201C25.28 34.3201 24.8 33.0001 24.36 32.2001C26.92 32.2801 29.44 32.2401 30.16 32.2401C30.88 32.2001 31.12 31.9601 31.12 31.2401V0.120117ZM17 0.120117H19.96V14.4001C19.96 21.1201 18.96 29.9601 11.76 35.4801C11.32 34.8801 10.2 33.8401 9.56001 33.4401C16.32 28.2401 17 20.6401 17 14.4001V0.120117Z" />
        <path ref="tian1" d="M20.64 14.12C22.96 23.08 28.24 29.2 37.6 31.48C36.88 32.16 36 33.44 35.52 34.28C25.8 31.52 20.48 24.92 17.72 14.76L20.64 14.12ZM2.60004 12.96H35.52V16H2.60004V12.96ZM1.36004 0.52002H36.56V3.56002H1.36004V0.52002ZM17.12 1.36002H20.28V10.68C20.28 19.12 18.48 28.76 2.44004 34.32C2.12004 33.56 1.24004 32.28 0.600037 31.68C15.56 26.6 17.12 18 17.12 10.68V1.36002Z"/>
      </g>
      
    </svg>
  </div>
</template>
<script setup>
import { ref, onMounted } from 'vue';

import { gsap } from "gsap-trial";
import { MotionPathPlugin } from "gsap-trial/all";
import { DrawSVGPlugin } from "gsap-trial/DrawSVGPlugin";
import { MorphSVGPlugin } from "gsap-trial/MorphSVGPlugin";

gsap.registerPlugin( MotionPathPlugin, DrawSVGPlugin, MorphSVGPlugin);

let transform = ref(``)
const defaultBtn = ref(null)
const rect = ref(null)
const circle = ref(null)
const pathLine = ref(null)
const cat = ref(null)
const dog = ref(null)
const jin = ref(null)
const tian = ref(null)
const min = ref(null)
const tian1 = ref(null)

transform.value = `translate(0,0)`
setTimeout(()=>{
  transform.value = `translate(${100}, ${100})`
}, 3000)

onMounted(() => {
  console.log(`the component is now mounted.`)
  /** 按钮  */
  gsap.to(defaultBtn.value,{
    y:20,
    duration:3,
    alpha:0.4,
    ease: "elastic.out(1, 0.3)", // 动画轨迹
  })
  /** 小方块运动  */
  gsap.to(rect.value,{
    y:150, duration:4, alpha:0.4, ease: "elastic.out(1, 0.3)", // 动画轨迹
  })
  /** 圆球沿着轨迹运动  */
  gsap.to(circle.value,{
    y:150, duration:4, ease: "bounce.out())", // 动画轨迹
    motionPath:{
      path: pathLine.value, // 运动的轨迹
      align: pathLine.value,
      autoRotate: 45, // 飞机运动旋转角度 （true为自动调整角度）
      alignOrigin: [1, 1] // 飞机的运动原点
    }
  })
  /** svg 图形变化过程 */ 
  // 创建时间线
  let tl = gsap.timeline({
    repeat: -1, 
    repeatDelay: 0.2,
    yoyo: true, // 动画回放
    defaults: {
      duration: 6
    }
  })
  tl
  .to( pathLine.value, { morphSVG: cat.value }, "+=3")
  .to( pathLine.value, { morphSVG: dog.value }, "+=3")
  .timeScale(6);

  /** svg 画图 */ 
  const t2 = gsap.timeline({ repeat: -1 });
  t2.fromTo( jin.value, { drawSVG: "0%" }, { duration: 1, drawSVG: "100%", stagger: 1 })
  t2.fromTo( tian.value, { drawSVG: "0%" }, { duration: 1, drawSVG: "100%", stagger: 1 })
  t2.fromTo( min.value, { drawSVG: "0%" }, { duration: 1, drawSVG: "100%", stagger: 1 })
  t2.fromTo( tian1.value, { drawSVG: "0%" }, { duration: 1, drawSVG: "100%", stagger: 1 })
})


</script>
<style lang="scss" scoped>
  .svg-btn {
    height: 60px;
    position: relative;
    width: 320px;
    background: #000;
    .rect {
      fill: transparent;
      stroke-dasharray: 200 540;
      stroke-dashoffset: -445;
      stroke-width: 8px;
    }
    @keyframes draw {
      0% {
        stroke-dasharray: 200 540;
        stroke-dashoffset: -445;
        stroke-width: 8px;
      }
      100% {
        stroke-dasharray: 760;
        stroke-dashoffset: 0;
        stroke-width: 2px;
      }
    }
    & :hover .rect {
      animation: 0.5s draw linear forwards;
    }
  }
  .name {
    font-family: "阿里妈妈东方大楷 Regular";
  }







</style>
